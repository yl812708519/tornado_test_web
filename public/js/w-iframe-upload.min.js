!function(a){var b=function(b,c){this.$element=b,this.defaults={url:"",ossName:"default",openPositionInterval:!1,multiple:!0,xsrfName:"_xsrf",xsrfValue:"",beforeSubmit:function(){return!0},success:function(){},accept:""},this.options=a.extend({},this.defaults,c),this.options.xsrfValue||(this.options.xsrfValue=a("input[name="+this.options.xsrfName+"]").val()),this.options.elementLabel="INPUT"==this.$element[0].tagName?this.$element.val():this.$element.text()};b.prototype={init:function(){var b=this.options,c=this.$element;c.data("options",b);var d=c.data("upload_form"),e=c.attr("id");if(e||c.attr("id",(new Date).getTime()),!d){var f=b.multiple?'multiple="multiple"':"",g='<form id="form_'+e+'" action="'+b.url+'"  style="" encType="multipart/form-data" method="post" target="hidden_frame"><div><input type="hidden" value="'+b.xsrfValue+'" name="'+b.xsrfName+'" /><input type="hidden" value="'+b.ossName+'" name="ossName" /><input type="hidden" value="'+b.multiple+'" name="multiple" /><input type="hidden" value="'+e+'" name="eleId" /><input type="file" name="fileData" accept="'+b.accept+'" '+f+" /></div></form>";a("body").append(g),d=a("#form_"+e),this.setFilePosition(),b.openPositionInterval&&setInterval(function(){var a=c.offset(),b=a.top,e=a.left;d.css({left:e+"px",top:b+"px"})},300),d.find("div").css({position:"relative",width:"100%",height:"100%",overflow:"hidden"}),d.find("input[type=file]").css({position:"absolute",cursor:"pointer",left:"0",top:"0",width:"100%",height:"100%",opacity:"0","-ms-filter":"alpha(opacity=0)",filter:"alpha(opacity=0)"}),c.data("upload_form",d)}return a("#hidden_frame").length<=0&&a("body").append('<iframe name="hidden_frame" id="hidden_frame" style="display:none"></iframe>'),d.find("input[type=file]").change(function(){var c=b.beforeSubmit(a(this));c&&d.submit()}),c},setFilePosition:function(){var b=(this.options,this.$element),c=b.outerWidth(!0),d=b.outerHeight(!0),e=b.offset().top,f=b.offset().left,g=b.attr("id"),h=a("#form_"+g);h.css({width:c+"px",height:d+"px",position:"absolute",left:f+"px",top:e+"px"})}},a.fn.wIFrameUpload=function(a,c){var d=new b(this,a);if("string"==typeof a){switch(a){case"success":this.data("options").success(c);break;default:return alert("No such method!"),this}return this}return d.init()}}(jQuery,window,document);