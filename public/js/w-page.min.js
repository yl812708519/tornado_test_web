/*! ekinginc 2015-09-11 */
!function(a,b,c,d){var e=function(b,c){this.$element=b,this.defaults={currentPage:1,totalPage:1,firstCount:1,lastCount:1,prevCount:2,nextCount:6,clickCallBack:function(a,b){console.log(a),console.log(b.parent().html())}},this.oriOptions=a.extend({},this.defaults,c),this.options=a.extend({},this.defaults,c),this.options.currentPage=parseInt(this.oriOptions.currentPage)||1,this.options.totalPage=parseInt(this.oriOptions.totalPage)||1,this.options.firstCount=this.oriOptions.firstCount==d?1:0==parseInt(this.oriOptions.firstCount)?0:parseInt(this.oriOptions.firstCount)||1,this.options.lastCount=this.oriOptions.lastCount==d?1:0==parseInt(this.oriOptions.lastCount)?0:parseInt(this.oriOptions.lastCount)||1,this.options.prevCount=this.oriOptions.prevCount==d?2:0==parseInt(this.oriOptions.prevCount)?0:parseInt(this.oriOptions.prevCount)||2,this.options.nextCount=this.oriOptions.nextCount==d?6:0==parseInt(this.oriOptions.nextCount)?0:parseInt(this.oriOptions.nextCount)||6,this.options.currentPage=this.options.currentPage>=this.options.totalPage?this.options.totalPage:this.options.currentPage,this.options.currentPage=this.options.currentPage<=0?1:this.options.currentPage,this.options.totalPage=this.options.totalPage<=0?1:this.options.totalPage,this.options.firstCount=this.options.firstCount<0?1:this.options.firstCount,this.options.lastCount=this.options.lastCount<0?1:this.options.lastCount,this.options.prevCount=this.options.prevCount<0?2:this.options.prevCount,this.options.nextCount=this.options.nextCount<0?6:this.options.nextCount};e.prototype={init:function(){var b=this,c=b.options,d=b.$element;d.html('<ul class="pagination" style="margin:0px;"><li title="上一页" class="page-prev page-pn" ><a href="javascript:;" >&lt;</a></li><li title="下一页" class="page-next page-pn"><a href="javascript:;">&gt;</a></li></ul>'),b.setNumList();var e=null,f=!1;d.find(".page-prev").mousedown(function(){e=setInterval(function(){c.currentPage--,c.currentPage=c.currentPage<=1?1:c.currentPage,b.setNumList(),f=!0},150)}).mouseup(function(){clearInterval(e),f||(c.currentPage--,c.currentPage=c.currentPage<=1?1:c.currentPage,b.setNumList()),f=!1,c.clickCallBack&&c.clickCallBack(c.currentPage,a(this))}).mouseout(function(){clearInterval(e)});var g=null;return d.find(".page-next").mousedown(function(){g=setInterval(function(){c.currentPage++,c.currentPage=c.currentPage>=c.totalPage?c.totalPage:c.currentPage,b.setNumList(),f=!0},150)}).mouseup(function(){clearInterval(g),f||(c.currentPage++,c.currentPage=c.currentPage>=c.totalPage?c.totalPage:c.currentPage,b.setNumList()),f=!1,c.clickCallBack&&c.clickCallBack(c.currentPage,a(this))}).mouseout(function(){clearInterval(g)}),d},setNumList:function(){var b="",c=this,d=c.options,e=c.$element,f=d.firstCount,g=d.prevCount,h=d.nextCount,i=d.lastCount,j=d.currentPage,k=d.totalPage,l=f+g+h+i+3,m=j-g-f>1?!0:!1,n=k>j+h+i?!0:!1;if(1==m&&0==n)if(k>l){for(var o=1;f>=o;o++)b+='<li><a href="javascript:;" class="page-num">'+o+"</a></li>";b+='<li class="disabled"><a href="javascript:;">…</a></li>';for(var o=k-i-h-g-1;k>=o;o++)b+=o==j?'<li class="active"><a href="javascript:;" class="page-num">'+o+"</a></li>":'<li><a href="javascript:;" class="page-num">'+o+"</a></li>"}else for(var o=1;k>=o;o++)b+=o==j?'<li class="active"><a href="javascript:;" class="page-num">'+o+"</a></li>":'<li><a href="javascript:;" class="page-num">'+o+"</a></li>";if(0==m&&1==n)if(k>l){for(var o=1;h+g+f+3>o;o++)b+=o==j?'<li class="active"><a href="javascript:;" class="page-num">'+o+"</a></li>":'<li><a href="javascript:;" class="page-num">'+o+"</a></li>";b+='<li class="disabled"><a href="javascript:;">…</a></li>';for(var o=k-i+1;k>=o;o++)b+='<li><a href="javascript:;" class="page-num">'+o+"</a></li>"}else for(var o=1;k>=o;o++)b+=o==j?'<li class="active"><a href="javascript:;" class="page-num">'+o+"</a></li>":'<li><a href="javascript:;" class="page-num">'+o+"</a></li>";if(0==m&&0==n)for(var o=1;k>=o;o++)b+=o==j?'<li class="active"><a href="javascript:;" class="page-num">'+o+"</a></li>":'<li><a href="javascript:;" class="page-num">'+o+"</a></li>";if(1==m&&1==n){for(var o=1;f>=o;o++)b+='<li><a href="javascript:;" class="page-num">'+o+"</a></li>";b+='<li class="disabled"><a href="javascript:;">…</a></li>';for(var o=j-g;j+h>=o;o++)b+=o==j?'<li class="active"><a href="javascript:;"  class="page-num">'+o+"</a></li>":'<li><a href="javascript:;" class="page-num">'+o+"</a></li>";b+='<li class="disabled"><a href="javascript:;">…</a></li>';for(var o=k-i+1;k>=o;o++)b+='<li><a href="javascript:;" class="page-num">'+o+"</a></li>"}return e.find("li:not(.page-pn)").remove(),e.find("li.page-prev").after(b),1>=j?e.find(".page-prev").addClass("disabled"):e.find(".page-prev").removeClass("disabled"),j>=k?e.find(".page-next").addClass("disabled"):e.find(".page-next").removeClass("disabled"),e.find(".page-num").click(function(){d.currentPage=parseInt(a(this).html()),d.clickCallBack&&d.clickCallBack(d.currentPage,a(this)),c.setNumList()}),e},getCurrentPage:function(){return this.options.currentPage},getTotalPage:function(){return this.options.totalPage}},a.fn.wPage=function(b,c){if(this.length<=0)return this;if(!b.totalPage||b.totalPage<=1)return this;this.data("_wPageObj_")||this.data("_wPageObj_",new e(this,b));var f=this.data("_wPageObj_");if(b==d||"object"==typeof b&&!a.isFunction(b))return f.init();if("string"==typeof b)switch(b){case"getCurrentPage":return f.getCurrentPage();case"getTotalPage":return f.getTotalPage();default:return"No such method!"}}}(jQuery,window,document);